<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Success Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
        
        * {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        @media print {
            @page {
                size: letter;
                margin: 0.5in;
            }
            
            .no-print {
                display: none !important;
            }
            
            .card, .section-header, .kpi-cell {
                page-break-inside: avoid;
            }
            
            h2, h3 {
                page-break-after: avoid;
            }
            
            .section-label {
                page-break-after: avoid;
            }
        }
        
        /* Custom styles for exact spec matching */
        .section-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 500;
            color: #6B7280;
            margin-bottom: 12px;
        }
        
        .card {
            border: 1px solid #E5E7EB;
            border-radius: 6px;
            padding: 16px;
            background: white;
        }
        
        .card-summary {
            background: #F9FAFB;
        }
        
        .date-chip {
            display: inline-flex;
            align-items: center;
            font-size: 11px;
            font-weight: 500;
            color: #6B7280;
            background: #F3F4F6;
            padding: 2px 8px;
            border-radius: 9999px;
        }
        
        .delta-pill {
            display: inline-flex;
            align-items: center;
            font-size: 11px;
            font-weight: 500;
            padding: 1px 6px;
            border-radius: 9999px;
        }
        
        .delta-pill.positive {
            color: #059669;
            background: #D1FAE5;
        }
        
        .delta-pill.negative {
            color: #DC2626;
            background: #FEE2E2;
        }
        
        .achieved-badge {
            display: inline-flex;
            align-items: center;
            font-size: 11px;
            font-weight: 500;
            color: #059669;
            background: #D1FAE5;
            padding: 2px 8px;
            border-radius: 9999px;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 12px;
        }
        
        @media (max-width: 640px) {
            .kpi-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .kpi-cell {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .kpi-label {
            font-size: 11px;
            text-transform: uppercase;
            color: #6B7280;
            font-weight: 400;
        }
        
        .kpi-value-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .kpi-value {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
        }
    </style>
</head>
<body class="bg-gray-50 p-8">
    <!-- Generate PDF Button -->
    <div class="no-print text-center mb-8">
        <button onclick="generatePDF()" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700">
            Generate PDF
        </button>
    </div>

    <!-- Report Container -->
    <div id="report" class="max-w-[7.5in] mx-auto bg-white">
        <!-- Header -->
        <div class="flex justify-between items-start pb-4 border-b border-gray-200">
            <h1 class="text-2xl font-semibold text-gray-900">Customer Success Plan</h1>
            <div class="text-right">
                <div class="text-xs text-gray-700">Customer: <span id="customer-name"></span></div>
                <div class="text-[11px] text-gray-600">Generated: <span id="generated-date"></span></div>
            </div>
        </div>

        <!-- Mission Summary -->
        <div class="mt-6">
            <div class="section-label">MISSION SUMMARY</div>
            <div class="card card-summary">
                <p id="mission-summary" class="text-[13px] text-gray-700 leading-relaxed"></p>
            </div>
        </div>

        <!-- Mission Goals -->
        <div class="mt-6">
            <div class="section-label">MISSION GOALS</div>
            <div id="mission-goals" class="grid grid-cols-2 gap-4"></div>
        </div>

        <!-- Value Realized -->
        <div class="mt-6">
            <div class="section-label">VALUE REALIZED</div>
            <div id="value-realized" class="grid grid-cols-3 gap-4"></div>
        </div>

        <!-- Current Objectives -->
        <div class="mt-6">
            <div class="section-label">CURRENT OBJECTIVES</div>
            <div id="current-objectives" class="space-y-4"></div>
        </div>

        <!-- Past Objectives Achieved -->
        <div class="mt-6">
            <div class="section-label">PAST OBJECTIVES ACHIEVED</div>
            <div id="past-objectives" class="space-y-4"></div>
        </div>

        <!-- Footer -->
        <div class="mt-8 pt-4 border-t border-gray-200 flex justify-between items-center text-[11px] text-gray-600">
            <div>Responsive Platform — Customer Success Products: <span id="footer-products"></span></div>
            <div>Owner: <span id="footer-owner"></span></div>
        </div>
    </div>

    <script>
        // Sample data
        const data = {
            customer: "TechCorp",
            generatedOn: "2025-01-13",
            missionSummary: "Single-paragraph summary of the customer mission and what success looks like for the next two quarters.",
            missionGoals: [
                { title: "Content Excellence Initiative", body: "Define ownership, taxonomy, and lifecycle for all content." },
                { title: "AI Adoption Program", body: "Scale AI-generated responses to reduce cycle time and raise win rate." }
            ],
            valueRealized: [
                { title: "Time Savings", body: "Average 6 hours/week saved per rep via content discovery and AI responses.", date: "1/14/2025" },
                { title: "Win Rate Increase", body: "AI-recommended content drove +12% win rate; ~$2.1M impact.", date: "1/21/2025" },
                { title: "Cost Reduction", body: "35% lower content creation cost via reuse and AI assist.", date: "1/9/2025" }
            ],
            currentObjectives: [
                {
                    title: "Implement Content Governance Framework",
                    target: "3/14/2025",
                    description: "Automate lifecycle, ownership, retention, and review SLAs across libraries.",
                    kpis: [
                        { label: "% with ownership", value: "62%", delta: "+313.3%" },
                        { label: "% obsolete", value: "18%", delta: "-43.8%" },
                        { label: "Tagging %", value: "71%", delta: "+208.7%" }
                    ]
                },
                {
                    title: "Scale AI-Powered Responses",
                    target: "4/29/2025",
                    description: "Roll out to 200+ reps with enablement and guardrails.",
                    kpis: [
                        { label: "% answered with AI", value: "34%", delta: "+325.0%" },
                        { label: "Time to first draft", value: "2.1 min", delta: "-73.3%" }
                    ]
                }
            ],
            pastObjectivesAchieved: [
                {
                    title: "Content Audit Wave 1",
                    completed: "2/10/2025",
                    description: "Retired obsolete assets and assigned owners.",
                    kpis: [
                        { label: "Assets retired", value: "1,240", delta: "+100%" },
                        { label: "Owner coverage", value: "55%", delta: "+200%" }
                    ]
                },
                {
                    title: "AI Pilot Rollout",
                    completed: "2/28/2025",
                    description: "Pilot to 25 reps with enablement.",
                    kpis: [{ label: "Adoption (pilot)", value: "78%", delta: "+78%" }]
                }
            ],
            footer: { products: "Content Library, AI", owner: "Atiq Azel Khan" }
        };

        // Format date function
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;
        }

        // Populate header
        document.getElementById('customer-name').textContent = data.customer;
        document.getElementById('generated-date').textContent = formatDate(data.generatedOn);

        // Populate mission summary
        document.getElementById('mission-summary').textContent = data.missionSummary;

        // Populate mission goals
        const goalsContainer = document.getElementById('mission-goals');
        data.missionGoals.forEach(goal => {
            const goalCard = document.createElement('div');
            goalCard.className = 'card';
            goalCard.innerHTML = `
                <h3 class="text-base font-semibold text-gray-900 mb-2">${goal.title}</h3>
                <p class="text-[13px] text-gray-700">${goal.body}</p>
            `;
            goalsContainer.appendChild(goalCard);
        });

        // Populate value realized
        const valueContainer = document.getElementById('value-realized');
        data.valueRealized.forEach(value => {
            const valueCard = document.createElement('div');
            valueCard.className = 'card';
            valueCard.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <h3 class="text-sm font-medium text-gray-900">${value.title}</h3>
                    <span class="date-chip">Completed: ${value.date}</span>
                </div>
                <p class="text-[13px] text-gray-700">${value.body}</p>
            `;
            valueContainer.appendChild(valueCard);
        });

        // Helper function to create KPI grid
        function createKPIGrid(kpis) {
            let kpiHTML = '<div class="kpi-grid">';
            kpis.forEach(kpi => {
                const deltaClass = kpi.delta.startsWith('+') ? 'positive' : 'negative';
                kpiHTML += `
                    <div class="kpi-cell">
                        <div class="kpi-label">${kpi.label}</div>
                        <div class="kpi-value-row">
                            <span class="kpi-value">${kpi.value}</span>
                            <span class="delta-pill ${deltaClass}">${kpi.delta}</span>
                        </div>
                    </div>
                `;
            });
            kpiHTML += '</div>';
            return kpiHTML;
        }

        // Populate current objectives
        const currentContainer = document.getElementById('current-objectives');
        data.currentObjectives.forEach(objective => {
            const objectiveCard = document.createElement('div');
            objectiveCard.className = 'card';
            objectiveCard.innerHTML = `
                <div class="mb-3">
                    <h3 class="text-base font-semibold text-gray-900 inline">${objective.title}</h3>
                    <span class="text-[13px] text-gray-600 ml-2">• Target: ${objective.target}</span>
                </div>
                <p class="text-[13px] text-gray-700 mb-3">${objective.description}</p>
                ${createKPIGrid(objective.kpis)}
            `;
            currentContainer.appendChild(objectiveCard);
        });

        // Populate past objectives
        const pastContainer = document.getElementById('past-objectives');
        data.pastObjectivesAchieved.forEach(objective => {
            const objectiveCard = document.createElement('div');
            objectiveCard.className = 'card';
            objectiveCard.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <span class="achieved-badge mr-2">Achieved</span>
                        <h3 class="text-base font-semibold text-gray-900 inline">${objective.title}</h3>
                    </div>
                    <span class="date-chip">Completed: ${objective.completed}</span>
                </div>
                <p class="text-[13px] text-gray-700 mb-3">${objective.description}</p>
                ${createKPIGrid(objective.kpis)}
            `;
            pastContainer.appendChild(objectiveCard);
        });

        // Populate footer
        document.getElementById('footer-products').textContent = data.footer.products;
        document.getElementById('footer-owner').textContent = data.footer.owner;

        // Generate PDF function
        function generatePDF() {
            const element = document.getElementById('report');
            const opt = {
                margin: 0.5,
                filename: `${data.customer}-success-plan.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            
            html2pdf().from(element).set(opt).save();
        }
    </script>
</body>
</html>
